% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/boxCox.R, R/boxCoxLambda.R
\name{boxCox}
\alias{boxCox}
\alias{boxCoxInv}
\alias{boxCoxLambda}
\title{Box Cox Transformation}
\usage{
boxCox(x, lambda)

boxCoxInv(x, lambda)

boxCoxLambda(x, method = c("guerrero", "loglik"), lower = -1, upper = 2)
}
\arguments{
\item{x}{a numeric vector or time series}

\item{lambda}{transformation parameter}

\item{method}{method to be used in calculating lambda. Can be either
"guerrero" (default) or "loglik".}

\item{lower}{lower limit for possible lambda values, default is -1.}

\item{upper}{upper limit for possible lambda values, default is 2.}
}
\value{
a numeric vector of the same length as x.

a number indicating the Box-Cox transformation parameter.
}
\description{
\code{boxCox()} returns a transformation of the input variable using a
Box-Cox transformation.\cr \code{boxCoxInv()} reverses the transformation.

An automatic selection of the Box Cox transformation parameter is estimated
with two methods.\cr Guerrero's (1993) method yields a lambda which
minimizes the coefficient of variation for subseries of \code{x}.  For
method \code{"loglik"}, the value of lambda is chosen to maximize the
profile log likelihood of a linear model fitted to \code{x}.  For
non-seasonal data, a linear time trend is fitted while for seasonal data, a
linear time trend with seasonal dummy variables is used.
}
\details{
The Box-Cox transformation is given by

\% \deqn{\theta(h) = % \left\{\begin{array}{ll} % u_\beta \left(\mu +
\frac{\nu(h)}{\Gamma(1 - \xi)} % \right),&\xi \neq 0\\ %
\exp\left(\frac{\nu(h)}{\sigma}\right),&\xi = 0 % \end{array}\right. %
}{u_beta (mu + nu(h) / Gamma(1 - \xi)), if \xi < 1, % exp(nu(h)/sigma),
otherwise}

\deqn{f_\lambda(x) = }{f(x;\lambda)=(x^\lambda - 1)/\lambda, if \lambda not
0, log(x), otherwise}\deqn{ \left\{\begin{array}{ll}
}{f(x;\lambda)=(x^\lambda - 1)/\lambda, if \lambda not 0, log(x),
otherwise}\deqn{ \frac{x^\lambda - 1}{\lambda} &\textup{for }\lambda \neq
0\\ }{f(x;\lambda)=(x^\lambda - 1)/\lambda, if \lambda not 0, log(x),
otherwise}\deqn{ log(x) &\textup{for }\lambda = 0 }{f(x;\lambda)=(x^\lambda
- 1)/\lambda, if \lambda not 0, log(x), otherwise}\deqn{ \end{array}\right.
}{f(x;\lambda)=(x^\lambda - 1)/\lambda, if \lambda not 0, log(x), otherwise}
}
\note{
These two functions are borrowed from \code{library(forecast)}.

This function was previously published as \code{BoxCox.lambda()} in
the \pkg{forecast} package and has been integrated here without logical
changes.
}
\examples{

# example by Greg Snow
x <- rlnorm(500, 3, 2)

par(mfrow=c(2,2))
qqnorm(x, main="Lognormal")
qqnorm(boxCox(x, 1/2), main="boxCox(lambda=0.5)")
qqnorm(boxCox(x, 0), main="boxCox(lambda=0)")

plotFdist(boxCox(x, 0))

bx <- boxCox(x, lambda = boxCoxLambda(x) )



lambda <- boxCoxLambda(AirPassengers, lower=0)

# This R script contains code for extracting the Box-Cox
}
\references{
Box, G. E. P. and Cox, D. R. (1964) An analysis of
transformations. \emph{JRSS B} \bold{26} 211--246.

Box, G. E. P. and Cox, D. R. (1964) An analysis of
transformations. \emph{JRSS B} \bold{26} 211--246.

Guerrero, V.M. (1993) Time-series analysis supported by power
transformations. \emph{Journal of Forecasting}, \bold{12}, 37--48.
}
\seealso{
Use \code{\link{boxCoxLambda}} or \code{\link[MASS]{boxcox}} in
\code{library(MASS)} to find optimal lambda values.

\code{\link{boxCox}}
}
\author{
Rob J Hyndman \href{mailto:rob.hyndman@monash.edu}{rob.hyndman@monash.edu}

Leanne Chhay and Rob J Hyndman
}
\keyword{ts}
\keyword{univar}
